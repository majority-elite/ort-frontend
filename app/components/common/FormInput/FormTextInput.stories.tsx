import { action } from '@storybook/addon-actions';
import type { Meta, StoryObj } from '@storybook/react';
import { useState } from 'react';

import FormInput from './FormInput';

const meta: Meta<typeof FormInput.Text> = {
  component: FormInput.Text,
  decorators: [
    function Decorator(Story, ctx) {
      const [value, setValue] = useState('');

      return (
        <Story
          args={{
            ...ctx.args,
            value,
            onTextChange: (newText) => {
              action('onTextChange')(newText);
              setValue(newText);
            },
          }}
        />
      );
    },
  ],
};

export default meta;

type Story = StoryObj<typeof FormInput.Text>;

export const Main: Story = {
  args: {
    isError: false,
    placeholder: '텍스트를 입력해주세요.',
  },
};

export const WithIcon: Story = {
  args: {
    isError: false,
    placeholder: '텍스트를 입력해주세요.',
    Icon: ({ className }) => (
      <svg
        width="16"
        height="17"
        viewBox="0 0 16 17"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className={className}
      >
        <path
          d="M2.21049 9.68737L2.94067 9.51609L2.21049 9.68737ZM2.21049 6.04933L2.94067 6.22061L2.21049 6.04933ZM12.5262 6.04934L13.2564 5.87806L12.5262 6.04934ZM12.5262 9.68737L13.2564 9.85864L12.5262 9.68737ZM9.18737 13.0262L9.01609 12.296L9.18737 13.0262ZM5.54934 13.0262L5.37806 13.7564L5.54934 13.0262ZM5.54933 2.71049L5.37806 1.9803L5.54933 2.71049ZM9.18737 2.71048L9.35864 1.9803L9.18737 2.71048ZM13.4697 15.0303C13.7626 15.3232 14.2374 15.3232 14.5303 15.0303C14.8232 14.7374 14.8232 14.2626 14.5303 13.9697L13.4697 15.0303ZM2.94067 9.51609C2.68644 8.43231 2.68644 7.3044 2.94067 6.22061L1.4803 5.87805C1.17323 7.18715 1.17323 8.54955 1.4803 9.85865L2.94067 9.51609ZM11.796 6.22061C12.0503 7.3044 12.0503 8.43231 11.796 9.51609L13.2564 9.85864C13.5635 8.54955 13.5635 7.18715 13.2564 5.87806L11.796 6.22061ZM9.01609 12.296C7.93231 12.5503 6.8044 12.5503 5.72061 12.296L5.37806 13.7564C6.68715 14.0635 8.04955 14.0635 9.35864 13.7564L9.01609 12.296ZM5.72061 3.44067C6.8044 3.18644 7.93231 3.18644 9.01609 3.44067L9.35864 1.9803C8.04955 1.67323 6.68715 1.67323 5.37806 1.9803L5.72061 3.44067ZM5.72061 12.296C4.34124 11.9725 3.26422 10.8955 2.94067 9.51609L1.4803 9.85865C1.93396 11.7927 3.44405 13.3027 5.37806 13.7564L5.72061 12.296ZM9.35864 13.7564C11.2927 13.3027 12.8027 11.7927 13.2564 9.85864L11.796 9.51609C11.4725 10.8955 10.3955 11.9725 9.01609 12.296L9.35864 13.7564ZM9.01609 3.44067C10.3955 3.76422 11.4725 4.84124 11.796 6.22061L13.2564 5.87806C12.8027 3.94405 11.2927 2.43396 9.35864 1.9803L9.01609 3.44067ZM5.37806 1.9803C3.44405 2.43396 1.93396 3.94405 1.4803 5.87805L2.94067 6.22061C3.26422 4.84124 4.34124 3.76422 5.72061 3.44067L5.37806 1.9803ZM11.0264 12.5871L13.4697 15.0303L14.5303 13.9697L12.0871 11.5264L11.0264 12.5871Z"
          fill="currentColor"
        />
      </svg>
    ),
  },
};
